

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>IPython reference &mdash; IPython 7.9.0.dev documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IPython as a system shell" href="shell.html" />
    <link rel="prev" title="Rich Outputs" href="plotting.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> IPython
          

          
          </a>

          
            
            
              <div class="version">
                7.9.0.dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">IPython Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew/index.html">What’s new in IPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Introducing IPython</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotting.html">Rich Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotting.html#id1">Plotting</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">IPython reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#command-line-usage">Command-line usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Command-line Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#interactive-use">Interactive use</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#caution-for-windows-users">Caution for Windows users</a></li>
<li class="toctree-l4"><a class="reference internal" href="#magic-command-system">Magic command system</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-to-the-standard-python-help">Access to the standard Python help</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-object-information">Dynamic object information</a></li>
<li class="toctree-l4"><a class="reference internal" href="#session-logging-and-restoring">Session logging and restoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-shell-access">System shell access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#manual-capture-of-command-output-and-magic-output">Manual capture of command output and magic output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-command-aliases">System command aliases</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recursive-reload">Recursive reload</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verbose-and-colored-exception-traceback-printouts">Verbose and colored exception traceback printouts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#input-caching-system">Input caching system</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-caching-system">Output caching system</a></li>
<li class="toctree-l4"><a class="reference internal" href="#directory-history">Directory history</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automatic-parentheses-and-quotes">Automatic parentheses and quotes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ipython-as-your-default-python-environment">IPython as your default Python environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#embedding-ipython">Embedding IPython</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-python-debugger-pdb">Using the Python debugger (pdb)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#running-entire-programs-via-pdb">Running entire programs via pdb</a></li>
<li class="toctree-l4"><a class="reference internal" href="#post-mortem-debugging">Post-mortem debugging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pasting-of-code-starting-with-python-or-ipython-prompts">Pasting of code starting with Python or IPython prompts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gui-event-loop-support">GUI event loop support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyqt-and-pyside">PyQt and PySide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-with-matplotlib">Plotting with matplotlib</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interactive-demos-with-ipython">Interactive demos with IPython</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shell.html">IPython as a system shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="autoawait.html">Asynchronous in REPL: Autoawait</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html">IPython Tips &amp; Tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-ipython-diff.html">Python vs IPython</a></li>
<li class="toctree-l2"><a class="reference internal" href="magics.html">Built-in magic commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">Configuration and customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Developer’s guide for third party tools and libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coredev/index.html">Guide for IPython core Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">The IPython API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinxext.html">IPython Sphinx Directive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About IPython</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IPython</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Tutorial</a> &raquo;</li>
        
      <li>IPython reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/interactive/reference.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This documentation covers a development version of IPython. The development
version may differ significantly from the latest stable release.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This documentation covers IPython versions 6.0 and higher. Beginning with
version 6.0, IPython stopped supporting compatibility with Python versions
lower than 3.3 including all versions of Python 2.7.</p>
<p>If you are looking for an IPython version compatible with Python 2.7,
please use the IPython 5.x LTS release and refer to its documentation (LTS
is the long term support release).</p>
</div>
<div class="section" id="ipython-reference">
<h1>IPython reference<a class="headerlink" href="#ipython-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="command-line-usage">
<span id="command-line-options"></span><h2>Command-line usage<a class="headerlink" href="#command-line-usage" title="Permalink to this headline">¶</a></h2>
<p>You start IPython with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipython [options] files
</pre></div>
</div>
<p>If invoked with no options, it executes all the files listed in sequence and
exits. If you add the <code class="docutils literal notranslate"><span class="pre">-i</span></code> flag, it drops you into the interpreter while still
acknowledging any options you may have set in your <code class="docutils literal notranslate"><span class="pre">ipython_config.py</span></code>. This
behavior is different from standard Python, which when called as python <code class="docutils literal notranslate"><span class="pre">-i</span></code>
will only execute one file and ignore your configuration setup.</p>
<p>Please note that some of the configuration options are not available at the
command line, simply because they are not practical here. Look into your
configuration files for details on those. There are separate configuration files
for each profile, and the files look like <code class="file docutils literal notranslate"><span class="pre">ipython_config.py</span></code> or
<code class="file docutils literal notranslate"><span class="pre">ipython_config_</span><em><span class="pre">frontendname</span></em><span class="pre">.py</span></code>.  Profile directories look like
<code class="file docutils literal notranslate"><span class="pre">profile_</span><em><span class="pre">profilename</span></em></code> and are typically installed in the
<span class="target" id="index-0"></span><a class="reference internal" href="../config/intro.html#envvar-IPYTHONDIR"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">IPYTHONDIR</span></code></a> directory, which defaults to <code class="file docutils literal notranslate"><span class="pre">$HOME/.ipython</span></code>. For
Windows users, <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HOME</span></code> resolves to <code class="file docutils literal notranslate"><span class="pre">C:\Users{YourUserName}</span></code> in
most instances.</p>
<div class="section" id="id1">
<h3>Command-line Options<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>To see the options IPython accepts, use <code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">--help</span></code> (and you probably
should run the output through a pager such as <code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">--help</span> <span class="pre">|</span> <span class="pre">less</span></code> for
more convenient reading).  This shows all the options that have a single-word
alias to control them, but IPython lets you configure all of its objects from
the command-line by passing the full class name and a corresponding value; type
<code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">--help-all</span></code> to see this full list.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipython --help-all
&lt;...snip...&gt;
--matplotlib=&lt;CaselessStrEnum&gt; (InteractiveShellApp.matplotlib)
    Default: None
    Choices: [&#39;auto&#39;, &#39;gtk&#39;, &#39;gtk3&#39;, &#39;inline&#39;, &#39;nbagg&#39;, &#39;notebook&#39;, &#39;osx&#39;, &#39;qt&#39;, &#39;qt4&#39;, &#39;qt5&#39;, &#39;tk&#39;, &#39;wx&#39;]
    Configure matplotlib for interactive use with the default matplotlib
    backend.
&lt;...snip...&gt;
</pre></div>
</div>
<p>Indicate that the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipython --matplotlib qt
</pre></div>
</div>
<p>is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipython --TerminalIPythonApp.matplotlib=&#39;qt&#39;
</pre></div>
</div>
<p>Note that in the second form, you <em>must</em> use the equal sign, as the expression
is evaluated as an actual Python assignment.  While in the above example the
short form is more convenient, only the most common options have a short form,
while any configurable variable in IPython can be set at the command-line by
using the long form.  This long form is the same syntax used in the
configuration files, if you want to set these options permanently.</p>
</div>
</div>
<div class="section" id="interactive-use">
<h2>Interactive use<a class="headerlink" href="#interactive-use" title="Permalink to this headline">¶</a></h2>
<p>IPython is meant to work as a drop-in replacement for the standard interactive
interpreter. As such, any code which is valid python should execute normally
under IPython (cases where this is not true should be reported as bugs). It
does, however, offer many features which are not available at a standard python
prompt. What follows is a list of these.</p>
<div class="section" id="caution-for-windows-users">
<h3>Caution for Windows users<a class="headerlink" href="#caution-for-windows-users" title="Permalink to this headline">¶</a></h3>
<p>Windows, unfortunately, uses the ‘' character as a path separator. This is a
terrible choice, because ‘' also represents the escape character in most
modern programming languages, including Python. For this reason, using ‘/’
character is recommended if you have problems with <code class="docutils literal notranslate"><span class="pre">\</span></code>.  However, in Windows
commands ‘/’ flags options, so you can not use it for the root directory. This
means that paths beginning at the root must be typed in a contrived manner
like: <code class="docutils literal notranslate"><span class="pre">%copy</span> <span class="pre">\opt/foo/bar.txt</span> <span class="pre">\tmp</span></code></p>
</div>
<div class="section" id="magic-command-system">
<span id="magic"></span><h3>Magic command system<a class="headerlink" href="#magic-command-system" title="Permalink to this headline">¶</a></h3>
<p>IPython will treat any line whose first character is a % as a special
call to a ‘magic’ function. These allow you to control the behavior of
IPython itself, plus a lot of system-type features. They are all
prefixed with a % character, but parameters are given without
parentheses or quotes.</p>
<p>Lines that begin with <code class="docutils literal notranslate"><span class="pre">%%</span></code> signal a <em>cell magic</em>: they take as arguments not
only the rest of the current line, but all lines below them as well, in the
current execution block.  Cell magics can in fact make arbitrary modifications
to the input they receive, which need not even be valid Python code at all.
They receive the whole block as a single string.</p>
<p>As a line magic example, the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%cd</span></code> magic works just like the OS command of
the same name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="o">%</span><span class="n">cd</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">fperez</span>
</pre></div>
</div>
<p>The following uses the builtin <code class="xref std std-magic docutils literal notranslate"><span class="pre">%timeit</span></code> in cell mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="o">%%</span><span class="n">timeit</span> <span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
    <span class="o">...</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="o">...</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="o">...</span><span class="p">:</span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">438</span> <span class="n">us</span> <span class="n">per</span> <span class="n">loop</span>
</pre></div>
</div>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">range(10000)</span></code> is called as the line argument, and the
block with <code class="docutils literal notranslate"><span class="pre">min(x)</span></code> and <code class="docutils literal notranslate"><span class="pre">max(x)</span></code> is called as the cell body.  The
<code class="xref std std-magic docutils literal notranslate"><span class="pre">%timeit</span></code> magic receives both.</p>
<p>If you have ‘automagic’ enabled (as it is by default), you don’t need to type in
the single <code class="docutils literal notranslate"><span class="pre">%</span></code> explicitly for line magics; IPython will scan its internal
list of magic functions and call one if it exists. With automagic on you can
then just type <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">mydir</span></code> to go to directory ‘mydir’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">cd</span> <span class="n">mydir</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">fperez</span><span class="o">/</span><span class="n">mydir</span>
</pre></div>
</div>
<p>Cell magics <em>always</em> require an explicit <code class="docutils literal notranslate"><span class="pre">%%</span></code> prefix, automagic
calling only works for line magics.</p>
<p>The automagic system has the lowest possible precedence in name searches, so
you can freely use variables with the same names as magic commands. If a magic
command is ‘shadowed’ by a variable, you will need the explicit <code class="docutils literal notranslate"><span class="pre">%</span></code> prefix to
use it:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">cd</span> <span class="n">ipython</span>     <span class="c1"># %cd is called by automagic</span>
<span class="go">/home/fperez/ipython</span>

<span class="gp">In [2]: </span><span class="n">cd</span><span class="o">=</span><span class="mi">1</span>           <span class="c1"># now cd is just a variable</span>

<span class="gp">In [3]: </span><span class="n">cd</span> <span class="o">..</span>          <span class="c1"># and doesn&#39;t work as a function anymore</span>
<span class="go">File &quot;&lt;ipython-input-3-9fedb3aff56c&gt;&quot;, line 1</span>
<span class="go">  cd ..</span>
<span class="go">      ^</span>
<span class="go">SyntaxError: invalid syntax</span>


<span class="gp">In [4]: </span><span class="o">%</span><span class="k">cd</span> ..         # but %cd always works
<span class="go">/home/fperez</span>

<span class="gp">In [5]: </span><span class="k">del</span> <span class="n">cd</span>     <span class="c1"># if you remove the cd variable, automagic works again</span>

<span class="gp">In [6]: </span><span class="n">cd</span> <span class="n">ipython</span>

<span class="go">/home/fperez/ipython</span>
</pre></div>
</div>
<p>Line magics, if they return a value, can be assigned to a variable using the
syntax <code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">=</span> <span class="pre">%sx</span> <span class="pre">ls</span></code> (which in this particular case returns the result of <code class="docutils literal notranslate"><span class="pre">ls</span></code>
as a python list). See <a class="reference internal" href="#manual-capture"><span class="std std-ref">below</span></a> for more information.</p>
<p>Type <code class="docutils literal notranslate"><span class="pre">%magic</span></code> for more information, including a list of all available magic
functions at any time and their docstrings. You can also type
<code class="docutils literal notranslate"><span class="pre">%magic_function_name?</span></code> (see <a class="reference internal" href="#dynamic-object-info"><span class="std std-ref">below</span></a> for
information on the ‘?’ system) to get information about any particular magic
function you are interested in.</p>
<p>The API documentation for the <a class="reference internal" href="../api/generated/IPython.core.magic.html#module-IPython.core.magic" title="IPython.core.magic"><code class="xref py py-mod docutils literal notranslate"><span class="pre">IPython.core.magic</span></code></a> module contains the full
docstrings of all currently available magic commands.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="magics.html"><span class="doc">Built-in magic commands</span></a></dt><dd><p>A list of the line and cell magics available in IPython by default</p>
</dd>
<dt><a class="reference internal" href="../config/custommagics.html#defining-magics"><span class="std std-ref">Defining custom magics</span></a></dt><dd><p>How to define and register additional magic functions</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="access-to-the-standard-python-help">
<h3>Access to the standard Python help<a class="headerlink" href="#access-to-the-standard-python-help" title="Permalink to this headline">¶</a></h3>
<p>Simply type <code class="docutils literal notranslate"><span class="pre">help()</span></code> to access Python’s standard help system. You can
also type <code class="docutils literal notranslate"><span class="pre">help(object)</span></code> for information about a given object, or
<code class="docutils literal notranslate"><span class="pre">help('keyword')</span></code> for information on a keyword. You may need to configure your
PYTHONDOCS environment variable for this feature to work correctly.</p>
</div>
<div class="section" id="dynamic-object-information">
<span id="dynamic-object-info"></span><h3>Dynamic object information<a class="headerlink" href="#dynamic-object-information" title="Permalink to this headline">¶</a></h3>
<p>Typing <code class="docutils literal notranslate"><span class="pre">?word</span></code> or <code class="docutils literal notranslate"><span class="pre">word?</span></code> prints detailed information about an object. If
certain strings in the object are too long (e.g. function signatures) they get
snipped in the center for brevity. This system gives access variable types and
values, docstrings, function prototypes and other useful information.</p>
<p>If the information will not fit in the terminal, it is displayed in a pager
(<code class="docutils literal notranslate"><span class="pre">less</span></code> if available, otherwise a basic internal pager).</p>
<p>Typing <code class="docutils literal notranslate"><span class="pre">??word</span></code> or <code class="docutils literal notranslate"><span class="pre">word??</span></code> gives access to the full information, including
the source code where possible. Long strings are not snipped.</p>
<p>The following magic functions are particularly useful for gathering
information about your working environment:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref std std-magic docutils literal notranslate"><span class="pre">%pdoc</span></code> <strong>&lt;object&gt;</strong>: Print (or run through a pager if too long) the
docstring for an object. If the given object is a class, it will
print both the class and the constructor docstrings.</p></li>
<li><p><code class="xref std std-magic docutils literal notranslate"><span class="pre">%pdef</span></code> <strong>&lt;object&gt;</strong>: Print the call signature for any callable
object. If the object is a class, print the constructor information.</p></li>
<li><p><code class="xref std std-magic docutils literal notranslate"><span class="pre">%psource</span></code> <strong>&lt;object&gt;</strong>: Print (or run through a pager if too long)
the source code for an object.</p></li>
<li><p><code class="xref std std-magic docutils literal notranslate"><span class="pre">%pfile</span></code> <strong>&lt;object&gt;</strong>: Show the entire source file where an object was
defined via a pager, opening it at the line where the object
definition begins.</p></li>
<li><p><code class="xref std std-magic docutils literal notranslate"><span class="pre">%who</span></code>/<code class="xref std std-magic docutils literal notranslate"><span class="pre">%whos</span></code>: These functions give information about identifiers
you have defined interactively (not things you loaded or defined
in your configuration files). %who just prints a list of
identifiers and %whos prints a table with some basic details about
each identifier.</p></li>
</ul>
</div></blockquote>
<p>The dynamic object information functions (?/??, <code class="docutils literal notranslate"><span class="pre">%pdoc</span></code>,
<code class="docutils literal notranslate"><span class="pre">%pfile</span></code>, <code class="docutils literal notranslate"><span class="pre">%pdef</span></code>, <code class="docutils literal notranslate"><span class="pre">%psource</span></code>) work on object attributes, as well as
directly on variables. For example, after doing <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">os</span></code>, you can use
<code class="docutils literal notranslate"><span class="pre">os.path.abspath??</span></code>.</p>
<div class="section" id="command-line-completion">
<h4>Command line completion<a class="headerlink" href="#command-line-completion" title="Permalink to this headline">¶</a></h4>
<p>At any time, hitting TAB will complete any available python commands or
variable names, and show you a list of the possible completions if
there’s no unambiguous one. It will also complete filenames in the
current directory if no python names match what you’ve typed so far.</p>
</div>
<div class="section" id="search-command-history">
<h4>Search command history<a class="headerlink" href="#search-command-history" title="Permalink to this headline">¶</a></h4>
<p>IPython provides two ways for searching through previous input and thus
reduce the need for repetitive typing:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Start typing, and then use the up and down arrow keys (or <kbd class="kbd docutils literal notranslate">Ctrl-p</kbd>
and <kbd class="kbd docutils literal notranslate">Ctrl-n</kbd>) to search through only the history items that match
what you’ve typed so far.</p></li>
<li><p>Hit <kbd class="kbd docutils literal notranslate">Ctrl-r</kbd>: to open a search prompt. Begin typing and the system
searches your history for lines that contain what you’ve typed so
far, completing as much as it can.</p></li>
</ol>
</div></blockquote>
<p>IPython will save your input history when it leaves and reload it next
time you restart it. By default, the history file is named
<code class="file docutils literal notranslate"><span class="pre">.ipython/profile_</span><em><span class="pre">name</span></em><span class="pre">/history.sqlite</span></code>.</p>
</div>
<div class="section" id="autoindent">
<h4>Autoindent<a class="headerlink" href="#autoindent" title="Permalink to this headline">¶</a></h4>
<p>Starting with 5.0, IPython uses <code class="docutils literal notranslate"><span class="pre">prompt_toolkit</span></code> in place of <code class="docutils literal notranslate"><span class="pre">readline</span></code>,
it thus can recognize lines ending in ‘:’ and indent the next line,
while also un-indenting automatically after ‘raise’ or ‘return’,
and support real multi-line editing as well as syntactic coloration
during edition.</p>
<p>This feature does not use the <code class="docutils literal notranslate"><span class="pre">readline</span></code> library anymore, so it will
not honor your <code class="file docutils literal notranslate"><span class="pre">~/.inputrc</span></code> configuration (or whatever
file your <span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">INPUTRC</span></code> environment variable points to).</p>
<p>In particular if you want to change the input mode to <code class="docutils literal notranslate"><span class="pre">vi</span></code>, you will need to
set the <code class="docutils literal notranslate"><span class="pre">TerminalInteractiveShell.editing_mode</span></code> configuration  option of IPython.</p>
</div>
</div>
<div class="section" id="session-logging-and-restoring">
<h3>Session logging and restoring<a class="headerlink" href="#session-logging-and-restoring" title="Permalink to this headline">¶</a></h3>
<p>You can log all input from a session either by starting IPython with the
command line switch <code class="docutils literal notranslate"><span class="pre">--logfile=foo.py</span></code> (see <a class="reference internal" href="#command-line-options"><span class="std std-ref">here</span></a>)
or by activating the logging at any moment with the magic function <code class="xref std std-magic docutils literal notranslate"><span class="pre">%logstart</span></code>.</p>
<p>Log files can later be reloaded by running them as scripts and IPython
will attempt to ‘replay’ the log by executing all the lines in it, thus
restoring the state of a previous session. This feature is not quite
perfect, but can still be useful in many cases.</p>
<p>The log files can also be used as a way to have a permanent record of
any code you wrote while experimenting. Log files are regular text files
which you can later open in your favorite text editor to extract code or
to ‘clean them up’ before using them to replay a session.</p>
<p>The <code class="xref std std-magic docutils literal notranslate"><span class="pre">%logstart</span></code> function for activating logging in mid-session is used as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">logstart</span> <span class="p">[</span><span class="n">log_name</span> <span class="p">[</span><span class="n">log_mode</span><span class="p">]]</span>
</pre></div>
</div>
<p>If no name is given, it defaults to a file named ‘ipython_log.py’ in your
current working directory, in ‘rotate’ mode (see below).</p>
<p>‘%logstart name’ saves to file ‘name’ in ‘backup’ mode. It saves your
history up to that point and then continues logging.</p>
<p>%logstart takes a second optional parameter: logging mode. This can be
one of (note that the modes are given unquoted):</p>
<blockquote>
<div><ul class="simple">
<li><p>[over:] overwrite existing log_name.</p></li>
<li><p>[backup:] rename (if exists) to log_name~ and start log_name.</p></li>
<li><p>[append:] well, that says it.</p></li>
<li><p>[rotate:] create rotating logs log_name.1~, log_name.2~, etc.</p></li>
</ul>
</div></blockquote>
<p>Adding the ‘-o’ flag to ‘%logstart’ magic (as in ‘%logstart -o [log_name [log_mode]]’)
will also include output from iPython in the log file.</p>
<p>The <code class="xref std std-magic docutils literal notranslate"><span class="pre">%logoff</span></code> and <code class="xref std std-magic docutils literal notranslate"><span class="pre">%logon</span></code> functions allow you to temporarily stop and
resume logging to a file which had previously been started with
%logstart. They will fail (with an explanation) if you try to use them
before logging has been started.</p>
</div>
<div class="section" id="system-shell-access">
<span id="id2"></span><h3>System shell access<a class="headerlink" href="#system-shell-access" title="Permalink to this headline">¶</a></h3>
<p>Any input line beginning with a <code class="docutils literal notranslate"><span class="pre">!</span></code> character is passed verbatim (minus
the <code class="docutils literal notranslate"><span class="pre">!</span></code>, of course) to the underlying operating system. For example,
typing <code class="docutils literal notranslate"><span class="pre">!ls</span></code> will run ‘ls’ in the current directory.</p>
</div>
<div class="section" id="manual-capture-of-command-output-and-magic-output">
<span id="manual-capture"></span><h3>Manual capture of command output and magic output<a class="headerlink" href="#manual-capture-of-command-output-and-magic-output" title="Permalink to this headline">¶</a></h3>
<p>You can assign the result of a system command to a Python variable with the
syntax <code class="docutils literal notranslate"><span class="pre">myfiles</span> <span class="pre">=</span> <span class="pre">!ls</span></code>. Similarly, the result of a magic (as long as it returns
a value) can be assigned to a variable.  For example, the syntax <code class="docutils literal notranslate"><span class="pre">myfiles</span> <span class="pre">=</span> <span class="pre">%sx</span> <span class="pre">ls</span></code>
is equivalent to the above system command example (the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%sx</span></code> magic runs a shell command
and captures the output).  Each of these gets machine
readable output from stdout (e.g. without colours), and splits on newlines. To
explicitly get this sort of output without assigning to a variable, use two
exclamation marks (<code class="docutils literal notranslate"><span class="pre">!!ls</span></code>) or the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%sx</span></code> magic command without an assignment.
(However, <code class="docutils literal notranslate"><span class="pre">!!</span></code> commands cannot be assigned to a variable.)</p>
<p>The captured list in this example has some convenience features. <code class="docutils literal notranslate"><span class="pre">myfiles.n</span></code> or <code class="docutils literal notranslate"><span class="pre">myfiles.s</span></code>
returns a string delimited by newlines or spaces, respectively. <code class="docutils literal notranslate"><span class="pre">myfiles.p</span></code>
produces <a class="reference external" href="http://pypi.python.org/pypi/path.py">path objects</a> from the list items.
See <a class="reference internal" href="shell.html#string-lists"><span class="std std-ref">String lists</span></a> for details.</p>
<p>IPython also allows you to expand the value of python variables when
making system calls. Wrap variables or expressions in {braces}:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>In [1]: pyvar = &#39;Hello world&#39;
In [2]: !echo &quot;A python variable: {pyvar}&quot;
A python variable: Hello world
In [3]: import math
In [4]: x = 8
In [5]: !echo {math.factorial(x)}
40320
</pre></div>
</div>
<p>For simple cases, you can alternatively prepend $ to a variable name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>In [6]: !echo $sys.argv
[/home/fperez/usr/bin/ipython]
In [7]: !echo &quot;A system variable: $$HOME&quot;  # Use $$ for literal $
A system variable: /home/fperez
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">$$</span></code> is used to represent a literal <code class="docutils literal notranslate"><span class="pre">$</span></code>.</p>
</div>
<div class="section" id="system-command-aliases">
<h3>System command aliases<a class="headerlink" href="#system-command-aliases" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref std std-magic docutils literal notranslate"><span class="pre">%alias</span></code> magic function allows you to define magic functions which are in fact
system shell commands. These aliases can have parameters.</p>
<p><code class="docutils literal notranslate"><span class="pre">%alias</span> <span class="pre">alias_name</span> <span class="pre">cmd</span></code> defines ‘alias_name’ as an alias for ‘cmd’</p>
<p>Then, typing <code class="docutils literal notranslate"><span class="pre">alias_name</span> <span class="pre">params</span></code> will execute the system command ‘cmd
params’ (from your underlying operating system).</p>
<p>You can also define aliases with parameters using <code class="docutils literal notranslate"><span class="pre">%s</span></code> specifiers (one per
parameter). The following example defines the parts function as an
alias to the command <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">first</span> <span class="pre">%s</span> <span class="pre">second</span> <span class="pre">%s</span></code> where each <code class="docutils literal notranslate"><span class="pre">%s</span></code> will be
replaced by a positional parameter to the call to %parts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="o">%</span><span class="n">alias</span> <span class="n">parts</span> <span class="n">echo</span> <span class="n">first</span> <span class="o">%</span><span class="n">s</span> <span class="n">second</span> <span class="o">%</span><span class="n">s</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">parts</span> <span class="n">A</span> <span class="n">B</span>
<span class="n">first</span> <span class="n">A</span> <span class="n">second</span> <span class="n">B</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">parts</span> <span class="n">A</span>
<span class="n">ERROR</span><span class="p">:</span> <span class="n">Alias</span> <span class="o">&lt;</span><span class="n">parts</span><span class="o">&gt;</span> <span class="n">requires</span> <span class="mi">2</span> <span class="n">arguments</span><span class="p">,</span> <span class="mi">1</span> <span class="n">given</span><span class="o">.</span>
</pre></div>
</div>
<p>If called with no parameters, <code class="xref std std-magic docutils literal notranslate"><span class="pre">%alias</span></code> prints the table of currently
defined aliases.</p>
<p>The <code class="xref std std-magic docutils literal notranslate"><span class="pre">%rehashx</span></code> magic allows you to load your entire $PATH as
ipython aliases. See its docstring for further details.</p>
</div>
<div class="section" id="recursive-reload">
<span id="dreload"></span><h3>Recursive reload<a class="headerlink" href="#recursive-reload" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../api/generated/IPython.lib.deepreload.html#module-IPython.lib.deepreload" title="IPython.lib.deepreload"><code class="xref py py-mod docutils literal notranslate"><span class="pre">IPython.lib.deepreload</span></code></a> module allows you to recursively reload a
module: changes made to any of its dependencies will be reloaded without
having to exit. To start using it, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.lib.deepreload</span> <span class="k">import</span> <span class="n">reload</span> <span class="k">as</span> <span class="n">dreload</span>
</pre></div>
</div>
</div>
<div class="section" id="verbose-and-colored-exception-traceback-printouts">
<h3>Verbose and colored exception traceback printouts<a class="headerlink" href="#verbose-and-colored-exception-traceback-printouts" title="Permalink to this headline">¶</a></h3>
<p>IPython provides the option to see very detailed exception tracebacks,
which can be especially useful when debugging large programs. You can
run any Python file with the %run function to benefit from these
detailed tracebacks. Furthermore, both normal and verbose tracebacks can
be colored (if your terminal supports it) which makes them much easier
to parse visually.</p>
<p>See the magic <code class="xref std std-magic docutils literal notranslate"><span class="pre">%xmode</span></code> and <code class="xref std std-magic docutils literal notranslate"><span class="pre">%colors</span></code> functions for details.</p>
<p>These features are basically a terminal version of Ka-Ping Yee’s cgitb
module, now part of the standard Python library.</p>
</div>
<div class="section" id="input-caching-system">
<span id="input-caching"></span><h3>Input caching system<a class="headerlink" href="#input-caching-system" title="Permalink to this headline">¶</a></h3>
<p>IPython offers numbered prompts (In/Out) with input and output caching
(also referred to as ‘input history’). All input is saved and can be
retrieved as variables (besides the usual arrow key recall), in
addition to the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%rep</span></code> magic command that brings a history entry
up for editing on the next command line.</p>
<p>The following variables always exist:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_i</span></code>, <code class="docutils literal notranslate"><span class="pre">_ii</span></code>, <code class="docutils literal notranslate"><span class="pre">_iii</span></code>: store previous, next previous and next-next
previous inputs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">In</span></code>, <code class="docutils literal notranslate"><span class="pre">_ih</span></code> : a list of all inputs; <code class="docutils literal notranslate"><span class="pre">_ih[n]</span></code> is the input from line
<code class="docutils literal notranslate"><span class="pre">n</span></code>. If you overwrite In with a variable of your own, you can remake the
assignment to the internal list with a simple <code class="docutils literal notranslate"><span class="pre">In=_ih</span></code>.</p></li>
</ul>
<p>Additionally, global variables named <code class="docutils literal notranslate"><span class="pre">_i&lt;n&gt;</span></code> are dynamically created (<code class="docutils literal notranslate"><span class="pre">&lt;n&gt;</span></code>
being the prompt counter), so <code class="docutils literal notranslate"><span class="pre">_i&lt;n&gt;</span> <span class="pre">==</span> <span class="pre">_ih[&lt;n&gt;]</span> <span class="pre">==</span> <span class="pre">In[&lt;n&gt;]</span></code>.</p>
<p>For example, what you typed at prompt 14 is available as <code class="docutils literal notranslate"><span class="pre">_i14</span></code>, <code class="docutils literal notranslate"><span class="pre">_ih[14]</span></code>
and <code class="docutils literal notranslate"><span class="pre">In[14]</span></code>.</p>
<p>This allows you to easily cut and paste multi line interactive prompts
by printing them out: they print like a clean string, without prompt
characters. You can also manipulate them like regular variables (they
are strings), modify or exec them.</p>
<p>You can also re-execute multiple lines of input easily by using the magic
<code class="xref std std-magic docutils literal notranslate"><span class="pre">%rerun</span></code> or <code class="xref std std-magic docutils literal notranslate"><span class="pre">%macro</span></code> functions. The macro system also allows you to
re-execute previous lines which include magic function calls (which require
special processing). Type %macro? for more details on the macro system.</p>
<p>A history function <code class="xref std std-magic docutils literal notranslate"><span class="pre">%history</span></code> allows you to see any part of your input
history by printing a range of the _i variables.</p>
<p>You can also search (‘grep’) through your history by typing
<code class="docutils literal notranslate"><span class="pre">%hist</span> <span class="pre">-g</span> <span class="pre">somestring</span></code>. This is handy for searching for URLs, IP addresses,
etc. You can bring history entries listed by ‘%hist -g’ up for editing
with the %recall command, or run them immediately with <code class="xref std std-magic docutils literal notranslate"><span class="pre">%rerun</span></code>.</p>
</div>
<div class="section" id="output-caching-system">
<span id="output-caching"></span><h3>Output caching system<a class="headerlink" href="#output-caching-system" title="Permalink to this headline">¶</a></h3>
<p>For output that is returned from actions, a system similar to the input
cache exists but using _ instead of _i. Only actions that produce a
result (NOT assignments, for example) are cached. If you are familiar
with Mathematica, IPython’s _ variables behave exactly like
Mathematica’s % variables.</p>
<p>The following variables always exist:</p>
<blockquote>
<div><ul class="simple">
<li><p>[_] (a single underscore): stores previous output, like Python’s
default interpreter.</p></li>
<li><p>[__] (two underscores): next previous.</p></li>
<li><p>[___] (three underscores): next-next previous.</p></li>
</ul>
</div></blockquote>
<p>Additionally, global variables named _&lt;n&gt; are dynamically created (&lt;n&gt;
being the prompt counter), such that the result of output &lt;n&gt; is always
available as _&lt;n&gt; (don’t use the angle brackets, just the number, e.g.
<code class="docutils literal notranslate"><span class="pre">_21</span></code>).</p>
<p>These variables are also stored in a global dictionary (not a
list, since it only has entries for lines which returned a result)
available under the names _oh and Out (similar to _ih and In). So the
output from line 12 can be obtained as <code class="docutils literal notranslate"><span class="pre">_12</span></code>, <code class="docutils literal notranslate"><span class="pre">Out[12]</span></code> or <code class="docutils literal notranslate"><span class="pre">_oh[12]</span></code>. If you
accidentally overwrite the Out variable you can recover it by typing
<code class="docutils literal notranslate"><span class="pre">Out=_oh</span></code> at the prompt.</p>
<p>This system obviously can potentially put heavy memory demands on your
system, since it prevents Python’s garbage collector from removing any
previously computed results. You can control how many results are kept
in memory with the configuration option <code class="docutils literal notranslate"><span class="pre">InteractiveShell.cache_size</span></code>.
If you set it to 0, output caching is disabled. You can also use the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%reset</span></code>
and <code class="xref std std-magic docutils literal notranslate"><span class="pre">%xdel</span></code> magics to clear large items from memory.</p>
</div>
<div class="section" id="directory-history">
<h3>Directory history<a class="headerlink" href="#directory-history" title="Permalink to this headline">¶</a></h3>
<p>Your history of visited directories is kept in the global list _dh, and
the magic <code class="xref std std-magic docutils literal notranslate"><span class="pre">%cd</span></code> command can be used to go to any entry in that list. The
<code class="xref std std-magic docutils literal notranslate"><span class="pre">%dhist</span></code> command allows you to view this history. Do <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">-&lt;TAB&gt;</span></code> to
conveniently view the directory history.</p>
</div>
<div class="section" id="automatic-parentheses-and-quotes">
<h3>Automatic parentheses and quotes<a class="headerlink" href="#automatic-parentheses-and-quotes" title="Permalink to this headline">¶</a></h3>
<p>These features were adapted from Nathan Gray’s LazyPython. They are
meant to allow less typing for common situations.</p>
<p>Callable objects (i.e. functions, methods, etc) can be invoked like this
(notice the commas between the arguments):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">callable_ob</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">arg3</span>
<span class="o">------&gt;</span> <span class="n">callable_ob</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">arg3</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is disabled by default. To enable it, use the <code class="docutils literal notranslate"><span class="pre">%autocall</span></code>
magic command. The commands below with special prefixes will always work,
however.</p>
</div>
<p>You can force automatic parentheses by using ‘/’ as the first character
of a line. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="o">/</span><span class="nb">globals</span> <span class="c1"># becomes &#39;globals()&#39;</span>
</pre></div>
</div>
<p>Note that the ‘/’ MUST be the first character on the line! This won’t work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="nb">print</span> <span class="o">/</span><span class="nb">globals</span> <span class="c1"># syntax error</span>
</pre></div>
</div>
<p>In most cases the automatic algorithm should work, so you should rarely
need to explicitly invoke /. One notable exception is if you are trying
to call a function with a list of tuples as arguments (the parenthesis
will confuse IPython):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="nb">zip</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># won&#39;t work</span>
</pre></div>
</div>
<p>but this will work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="o">/</span><span class="nb">zip</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="o">------&gt;</span> <span class="nb">zip</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
</pre></div>
</div>
<p>IPython tells you that it has altered your command line by displaying
the new command line preceded by <code class="docutils literal notranslate"><span class="pre">---&gt;</span></code>.</p>
<p>You can force automatic quoting of a function’s arguments by using <code class="docutils literal notranslate"><span class="pre">,</span></code>
or <code class="docutils literal notranslate"><span class="pre">;</span></code> as the first character of a line. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="p">,</span><span class="n">my_function</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">me</span>  <span class="c1"># becomes my_function(&quot;/home/me&quot;)</span>
</pre></div>
</div>
<p>If you use ‘;’ the whole argument is quoted as a single string, while ‘,’ splits
on whitespace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="p">,</span><span class="n">my_function</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>    <span class="c1"># becomes my_function(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="p">;</span><span class="n">my_function</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>    <span class="c1"># becomes my_function(&quot;a b c&quot;)</span>
</pre></div>
</div>
<p>Note that the ‘,’ or ‘;’ MUST be the first character on the line! This
won’t work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">x</span> <span class="o">=</span> <span class="p">,</span><span class="n">my_function</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">me</span> <span class="c1"># syntax error</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ipython-as-your-default-python-environment">
<h2>IPython as your default Python environment<a class="headerlink" href="#ipython-as-your-default-python-environment" title="Permalink to this headline">¶</a></h2>
<p>Python honors the environment variable <span class="target" id="index-3"></span><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONSTARTUP" title="(in Python v3.7)"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSTARTUP</span></code></a> and will
execute at startup the file referenced by this variable. If you put the
following code at the end of that file, then IPython will be your working
environment anytime you start Python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">IPython</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;PYTHONSTARTUP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># Prevent running this again</span>
<span class="n">IPython</span><span class="o">.</span><span class="n">start_ipython</span><span class="p">()</span>
<span class="k">raise</span> <span class="ne">SystemExit</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">SystemExit</span></code> is needed to exit Python when
it finishes, otherwise you’ll be back at the normal Python <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code>
prompt.</p>
<p>This is probably useful to developers who manage multiple Python
versions and don’t want to have correspondingly multiple IPython
versions. Note that in this mode, there is no way to pass IPython any
command-line options, as those are trapped first by Python itself.</p>
</div>
<div class="section" id="embedding-ipython">
<span id="embedding"></span><h2>Embedding IPython<a class="headerlink" href="#embedding-ipython" title="Permalink to this headline">¶</a></h2>
<p>You can start a regular IPython session with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">IPython</span>
<span class="n">IPython</span><span class="o">.</span><span class="n">start_ipython</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
</div>
<p>at any point in your program.  This will load IPython configuration,
startup files, and everything, just as if it were a normal IPython session.
For information on setting configuration options when running IPython from
python, see <a class="reference internal" href="../config/intro.html#configure-start-ipython"><span class="std std-ref">Running IPython from Python</span></a>.</p>
<p>It is also possible to embed an IPython shell in a namespace in your Python
code. This allows you to evaluate dynamically the state of your code, operate
with your variables, analyze them, etc. For example, if you run the following
code snippet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">IPython</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">IPython</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span>
</pre></div>
</div>
<p>and within the IPython shell, you reassign <code class="docutils literal notranslate"><span class="pre">a</span></code> to <code class="docutils literal notranslate"><span class="pre">23</span></code> to do further testing of
some sort, you can then exit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">IPython</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span>
<span class="go">Python 3.6.2 (default, Jul 17 2017, 16:44:45)</span>
<span class="go">Type &#39;copyright&#39;, &#39;credits&#39; or &#39;license&#39; for more information</span>
<span class="go">IPython 6.2.0.dev -- An enhanced Interactive Python. Type &#39;?&#39; for help.</span>

<span class="go">In [1]: a = 23</span>

<span class="go">In [2]: exit()</span>
</pre></div>
</div>
<p>Once you exit and print <code class="docutils literal notranslate"><span class="pre">a</span></code>, the value 23 will be shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">23</span>
</pre></div>
</div>
<p>It’s important to note that the code run in the embedded IPython shell will
<em>not</em> change the state of your code and variables, <strong>unless</strong> the shell is
contained within the global namespace. In the above example, <code class="docutils literal notranslate"><span class="pre">a</span></code> is changed
because this is true.</p>
<p>To further exemplify this, consider the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">IPython</span>
<span class="k">def</span> <span class="nf">do</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">IPython</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>Now if call the function and complete the state changes as we did above, the
value <code class="docutils literal notranslate"><span class="pre">42</span></code> will be printed. Again, this is because it’s not in the global
namespace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">do</span><span class="p">()</span>
</pre></div>
</div>
<p>Running a file with the above code can lead to the following session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">do</span><span class="p">()</span>
<span class="go">42</span>
<span class="go">Python 3.6.2 (default, Jul 17 2017, 16:44:45)</span>
<span class="go">Type &#39;copyright&#39;, &#39;credits&#39; or &#39;license&#39; for more information</span>
<span class="go">IPython 6.2.0.dev -- An enhanced Interactive Python. Type &#39;?&#39; for help.</span>

<span class="go">In [1]: a = 23</span>

<span class="go">In [2]: exit()</span>
<span class="go">42</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At present, embedding IPython cannot be done from inside IPython.
Run the code samples below outside IPython.</p>
</div>
<p>This feature allows you to easily have a fully functional python
environment for doing object introspection anywhere in your code with a
simple function call. In some cases a simple print statement is enough,
but if you need to do more detailed analysis of a code fragment this
feature can be very valuable.</p>
<p>It can also be useful in scientific computing situations where it is
common to need to do some automatic, computationally intensive part and
then stop to look at data, plots, etc.
Opening an IPython instance will give you full access to your data and
functions, and you can resume program execution once you are done with
the interactive part (perhaps to stop again later, as many times as
needed).</p>
<p>The following code snippet is the bare minimum you need to include in
your Python programs for this to work (detailed examples follow later):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython</span> <span class="k">import</span> <span class="n">embed</span>

<span class="n">embed</span><span class="p">()</span> <span class="c1"># this call anywhere in your program will start IPython</span>
</pre></div>
</div>
<p>You can also embed an IPython <em>kernel</em>, for use with qtconsole, etc. via
<code class="docutils literal notranslate"><span class="pre">IPython.embed_kernel()</span></code>. This should work the same way, but you can
connect an external frontend (<code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">qtconsole</span></code> or <code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">console</span></code>),
rather than interacting with it in the terminal.</p>
<p>You can run embedded instances even in code which is itself being run at
the IPython interactive prompt with ‘%run &lt;filename&gt;’. Since it’s easy
to get lost as to where you are (in your top-level IPython or in your
embedded one), it’s a good idea in such cases to set the in/out prompts
to something different for the embedded instances. The code examples
below illustrate this.</p>
<p>You can also have multiple IPython instances in your program and open
them separately, for example with different options for data
presentation. If you close and open the same instance multiple times,
its prompt counters simply continue from each execution to the next.</p>
<p>Please look at the docstrings in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">embed</span></code>
module for more details on the use of this system.</p>
<p>The following sample file illustrating how to use the embedding
functionality is provided in the examples directory as embed_class_long.py.
It should be fairly self-explanatory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;An example of how to embed an IPython shell into a running program.</span>

<span class="sd">Please see the documentation in the IPython.Shell module for more details.</span>

<span class="sd">The accompanying file embed_class_short.py has quick code fragments for</span>
<span class="sd">embedding which you can cut and paste in your code once you understand how</span>
<span class="sd">things work.</span>

<span class="sd">The code in this file is deliberately extra-verbose, meant for learning.&quot;&quot;&quot;</span>

<span class="c1"># The basics to get you going:</span>

<span class="c1"># IPython injects get_ipython into builtins, so you can know if you have nested</span>
<span class="c1"># copies running.</span>

<span class="c1"># Try running this code both at the command line and from inside IPython (with</span>
<span class="c1"># %run example-embed.py)</span>

<span class="kn">from</span> <span class="nn">IPython.terminal.prompts</span> <span class="kn">import</span> <span class="n">Prompts</span><span class="p">,</span> <span class="n">Token</span>

<span class="k">class</span> <span class="nc">CustomPrompt</span><span class="p">(</span><span class="n">Prompts</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">in_prompt_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cli</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

       <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">Token</span><span class="o">.</span><span class="n">Prompt</span><span class="p">,</span> <span class="s1">&#39;In &lt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="n">Token</span><span class="o">.</span><span class="n">PromptNum</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">execution_count</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">Token</span><span class="o">.</span><span class="n">Prompt</span><span class="p">,</span> <span class="s1">&#39;&gt;: &#39;</span><span class="p">),</span>
            <span class="p">]</span>

    <span class="k">def</span> <span class="nf">out_prompt_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">Token</span><span class="o">.</span><span class="n">OutPrompt</span><span class="p">,</span> <span class="s1">&#39;Out&lt;&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="n">Token</span><span class="o">.</span><span class="n">OutPromptNum</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">execution_count</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">Token</span><span class="o">.</span><span class="n">OutPrompt</span><span class="p">,</span> <span class="s1">&#39;&gt;: &#39;</span><span class="p">),</span>
        <span class="p">]</span>
 

<span class="kn">from</span> <span class="nn">traitlets.config.loader</span> <span class="kn">import</span> <span class="n">Config</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">get_ipython</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="n">nested</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
    <span class="n">cfg</span><span class="o">.</span><span class="n">TerminalInteractiveShell</span><span class="o">.</span><span class="n">prompts_class</span><span class="o">=</span><span class="n">CustomPrompt</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Running nested copies of IPython.&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;The prompts for the nested copy have been modified&quot;</span><span class="p">)</span>
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
    <span class="n">nested</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># First import the embeddable shell class</span>
<span class="kn">from</span> <span class="nn">IPython.terminal.embed</span> <span class="kn">import</span> <span class="n">InteractiveShellEmbed</span>

<span class="c1"># Now create an instance of the embeddable shell. The first argument is a</span>
<span class="c1"># string with options exactly as you would type them if you were starting</span>
<span class="c1"># IPython at the system command line. Any parameters you want to define for</span>
<span class="c1"># configuration can thus be specified here.</span>
<span class="n">ipshell</span> <span class="o">=</span> <span class="n">InteractiveShellEmbed</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span>
                       <span class="n">banner1</span> <span class="o">=</span> <span class="s1">&#39;Dropping into IPython&#39;</span><span class="p">,</span>
                       <span class="n">exit_msg</span> <span class="o">=</span> <span class="s1">&#39;Leaving Interpreter, back to program.&#39;</span><span class="p">)</span>

<span class="c1"># Make a second instance, you can have as many as you want.</span>
<span class="n">ipshell2</span> <span class="o">=</span> <span class="n">InteractiveShellEmbed</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span>
                        <span class="n">banner1</span> <span class="o">=</span> <span class="s1">&#39;Second IPython instance.&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Hello. This is printed from the main controller program.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># You can then call ipshell() anywhere you need it (with an optional</span>
<span class="c1"># message):</span>
<span class="n">ipshell</span><span class="p">(</span><span class="s1">&#39;***Called from top level. &#39;</span>
        <span class="s1">&#39;Hit Ctrl-D to exit interpreter and continue program.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="s1">&#39;Note that if you use %kill_embedded, you can fully deactivate</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="s1">&#39;This embedded instance so it will never turn on again&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Back in caller program, moving along...</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1">#---------------------------------------------------------------------------</span>
<span class="c1"># More details:</span>

<span class="c1"># InteractiveShellEmbed instances don&#39;t print the standard system banner and</span>
<span class="c1"># messages. The IPython banner (which actually may contain initialization</span>
<span class="c1"># messages) is available as get_ipython().banner in case you want it.</span>

<span class="c1"># InteractiveShellEmbed instances print the following information every time they</span>
<span class="c1"># start:</span>

<span class="c1"># - A global startup banner.</span>

<span class="c1"># - A call-specific header string, which you can use to indicate where in the</span>
<span class="c1"># execution flow the shell is starting.</span>

<span class="c1"># They also print an exit message every time they exit.</span>

<span class="c1"># Both the startup banner and the exit message default to None, and can be set</span>
<span class="c1"># either at the instance constructor or at any other time with the</span>
<span class="c1"># by setting the banner and exit_msg attributes.</span>

<span class="c1"># The shell instance can be also put in &#39;dummy&#39; mode globally or on a per-call</span>
<span class="c1"># basis. This gives you fine control for debugging without having to change</span>
<span class="c1"># code all over the place.</span>

<span class="c1"># The code below illustrates all this.</span>


<span class="c1"># This is how the global banner and exit_msg can be reset at any point</span>
<span class="n">ipshell</span><span class="o">.</span><span class="n">banner2</span> <span class="o">=</span> <span class="s1">&#39;Entering interpreter - New Banner&#39;</span>
<span class="n">ipshell</span><span class="o">.</span><span class="n">exit_msg</span> <span class="o">=</span> <span class="s1">&#39;Leaving interpreter - New exit_msg&#39;</span>

<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;spam&#39;</span>
    <span class="n">ipshell</span><span class="p">(</span><span class="s1">&#39;***In foo(). Try %whos, or print s or m:&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;foo says m = &#39;</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;eggs&#39;</span>
    <span class="n">ipshell</span><span class="p">(</span><span class="s1">&#39;***In bar(). Try %whos, or print s or n:&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;bar says n = &#39;</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
    
<span class="c1"># Some calls to the above functions which will trigger IPython:</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Main program calling foo(&quot;eggs&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">foo</span><span class="p">(</span><span class="s1">&#39;eggs&#39;</span><span class="p">)</span>

<span class="c1"># The shell can be put in &#39;dummy&#39; mode where calls to it silently return. This</span>
<span class="c1"># allows you, for example, to globally turn off debugging for a program with a</span>
<span class="c1"># single call.</span>
<span class="n">ipshell</span><span class="o">.</span><span class="n">dummy_mode</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Trying to call IPython which is now &quot;dummy&quot;:&#39;</span><span class="p">)</span>
<span class="n">ipshell</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Nothing happened...&#39;</span><span class="p">)</span>
<span class="c1"># The global &#39;dummy&#39; mode can still be overridden for a single call</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Overriding dummy mode manually:&#39;</span><span class="p">)</span>
<span class="n">ipshell</span><span class="p">(</span><span class="n">dummy</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="c1"># Reactivate the IPython shell</span>
<span class="n">ipshell</span><span class="o">.</span><span class="n">dummy_mode</span> <span class="o">=</span> <span class="bp">False</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;You can even have multiple embedded instances:&#39;</span><span class="p">)</span>
<span class="n">ipshell2</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Main program calling bar(&quot;spam&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">bar</span><span class="p">(</span><span class="s1">&#39;spam&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Main program finished. Bye!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once you understand how the system functions, you can use the following
code fragments in your programs which are ready for cut and paste:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Quick code snippets for embedding IPython into other programs.</span>

<span class="sd">See embed_class_long.py for full details, this file has the bare minimum code for</span>
<span class="sd">cut and paste use once you understand how to use the system.&quot;&quot;&quot;</span>

<span class="c1">#---------------------------------------------------------------------------</span>
<span class="c1"># This code loads IPython but modifies a few things if it detects it&#39;s running</span>
<span class="c1"># embedded in another IPython session (helps avoid confusion)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">get_ipython</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="n">banner</span><span class="o">=</span><span class="n">exit_msg</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">banner</span> <span class="o">=</span> <span class="s1">&#39;*** Nested interpreter ***&#39;</span>
    <span class="n">exit_msg</span> <span class="o">=</span> <span class="s1">&#39;*** Back in main IPython ***&#39;</span>

<span class="c1"># First import the embed function</span>
<span class="kn">from</span> <span class="nn">IPython.terminal.embed</span> <span class="kn">import</span> <span class="n">InteractiveShellEmbed</span>
<span class="c1"># Now create the IPython shell instance. Put ipshell() anywhere in your code</span>
<span class="c1"># where you want it to open.</span>
<span class="n">ipshell</span> <span class="o">=</span> <span class="n">InteractiveShellEmbed</span><span class="p">(</span><span class="n">banner1</span><span class="o">=</span><span class="n">banner</span><span class="p">,</span> <span class="n">exit_msg</span><span class="o">=</span><span class="n">exit_msg</span><span class="p">)</span>

<span class="c1">#---------------------------------------------------------------------------</span>
<span class="c1"># This code will load an embeddable IPython shell always with no changes for</span>
<span class="c1"># nested embededings.</span>

<span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">embed</span>
<span class="c1"># Now embed() will open IPython anywhere in the code.</span>

<span class="c1">#---------------------------------------------------------------------------</span>
<span class="c1"># This code loads an embeddable shell only if NOT running inside</span>
<span class="c1"># IPython. Inside IPython, the embeddable shell variable ipshell is just a</span>
<span class="c1"># dummy function.</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">get_ipython</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">IPython.terminal.embed</span> <span class="kn">import</span> <span class="n">InteractiveShellEmbed</span>
    <span class="n">ipshell</span> <span class="o">=</span> <span class="n">InteractiveShellEmbed</span><span class="p">()</span>
    <span class="c1"># Now ipshell() will open IPython anywhere in the code</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Define a dummy ipshell() so the same code doesn&#39;t crash inside an</span>
    <span class="c1"># interactive IPython</span>
    <span class="k">def</span> <span class="nf">ipshell</span><span class="p">():</span> <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-python-debugger-pdb">
<h2>Using the Python debugger (pdb)<a class="headerlink" href="#using-the-python-debugger-pdb" title="Permalink to this headline">¶</a></h2>
<div class="section" id="running-entire-programs-via-pdb">
<h3>Running entire programs via pdb<a class="headerlink" href="#running-entire-programs-via-pdb" title="Permalink to this headline">¶</a></h3>
<p>pdb, the Python debugger, is a powerful interactive debugger which
allows you to step through code, set breakpoints, watch variables,
etc.  IPython makes it very easy to start any script under the control
of pdb, regardless of whether you have wrapped it into a ‘main()’
function or not. For this, simply type <code class="docutils literal notranslate"><span class="pre">%run</span> <span class="pre">-d</span> <span class="pre">myscript</span></code> at an
IPython prompt. See the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%run</span></code> command’s documentation for more details, including
how to control where pdb will stop execution first.</p>
<p>For more information on the use of the pdb debugger, see <a class="reference external" href="https://docs.python.org/3/library/pdb.html#debugger-commands" title="(in Python v3.7)"><span>Debugger Commands</span></a>
in the Python documentation.</p>
<p>IPython extends the debugger with a few useful additions, like coloring of
tracebacks. The debugger will adopt the color scheme selected for IPython.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">where</span></code> command has also been extended to take as argument the number of
context line to show. This allows to a many line of context on shallow stack trace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="o">...</span><span class="p">:</span>     <span class="mi">1</span>
<span class="o">...</span><span class="p">:</span>     <span class="mi">2</span>
<span class="o">...</span><span class="p">:</span>     <span class="mi">3</span>
<span class="o">...</span><span class="p">:</span>     <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="o">+</span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="o">...</span><span class="p">:</span>     <span class="mi">5</span>
<span class="o">...</span><span class="p">:</span>     <span class="mi">6</span>
<span class="o">...</span><span class="p">:</span>     <span class="mi">7</span>
<span class="o">...</span><span class="p">:</span>

<span class="n">In</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="n">ipdb</span><span class="o">&gt;</span> <span class="n">where</span> <span class="mi">8</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="mf">9e45007</span><span class="n">b2b59</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">7</span><span class="n">baadc3d1465</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">foo</span><span class="p">()</span>
    <span class="mi">1</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="mi">2</span>     <span class="mi">1</span>
    <span class="mi">3</span>     <span class="mi">2</span>
    <span class="mi">4</span>     <span class="mi">3</span>
<span class="o">----&gt;</span> <span class="mi">5</span>     <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="o">+</span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="mi">6</span>     <span class="mi">5</span>
    <span class="mi">7</span>     <span class="mi">6</span>
    <span class="mi">8</span>     <span class="mi">7</span>

<span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">7</span><span class="n">baadc3d1465</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">foo</span><span class="p">()</span>
    <span class="mi">1</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="mi">2</span>     <span class="mi">1</span>
    <span class="mi">3</span>     <span class="mi">2</span>
    <span class="mi">4</span>     <span class="mi">3</span>
<span class="o">----&gt;</span> <span class="mi">5</span>     <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="o">+</span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="mi">6</span>     <span class="mi">5</span>
    <span class="mi">7</span>     <span class="mi">6</span>
    <span class="mi">8</span>     <span class="mi">7</span>
</pre></div>
</div>
<p>And less context on shallower Stack Trace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ipdb</span><span class="o">&gt;</span> <span class="n">where</span> <span class="mi">1</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">13</span><span class="o">-</span><span class="n">afa180a57233</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">foo</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">7</span><span class="n">baadc3d1465</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">foo</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">5</span>     <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="o">+</span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">7</span><span class="n">baadc3d1465</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">foo</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">5</span>     <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="o">+</span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">7</span><span class="n">baadc3d1465</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">foo</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">5</span>     <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="o">+</span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">7</span><span class="n">baadc3d1465</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">foo</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">5</span>     <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="o">+</span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="post-mortem-debugging">
<h3>Post-mortem debugging<a class="headerlink" href="#post-mortem-debugging" title="Permalink to this headline">¶</a></h3>
<p>Going into a debugger when an exception occurs can be
extremely useful in order to find the origin of subtle bugs, because pdb
opens up at the point in your code which triggered the exception, and
while your program is at this point ‘dead’, all the data is still
available and you can walk up and down the stack frame and understand
the origin of the problem.</p>
<p>You can use the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%debug</span></code> magic after an exception has occurred to start
post-mortem debugging. IPython can also call debugger every time your code
triggers an uncaught exception. This feature can be toggled with the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%pdb</span></code> magic
command, or you can start IPython with the <code class="docutils literal notranslate"><span class="pre">--pdb</span></code> option.</p>
<p>For a post-mortem debugger in your programs outside IPython,
put the following lines toward the top of your ‘main’ routine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">IPython.core</span> <span class="k">import</span> <span class="n">ultratb</span>
<span class="n">sys</span><span class="o">.</span><span class="n">excepthook</span> <span class="o">=</span> <span class="n">ultratb</span><span class="o">.</span><span class="n">FormattedTB</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;Verbose&#39;</span><span class="p">,</span>
<span class="n">color_scheme</span><span class="o">=</span><span class="s1">&#39;Linux&#39;</span><span class="p">,</span> <span class="n">call_pdb</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The mode keyword can be either ‘Verbose’ or ‘Plain’, giving either very
detailed or normal tracebacks respectively. The color_scheme keyword can
be one of ‘NoColor’, ‘Linux’ (default) or ‘LightBG’. These are the same
options which can be set in IPython with <code class="docutils literal notranslate"><span class="pre">--colors</span></code> and <code class="docutils literal notranslate"><span class="pre">--xmode</span></code>.</p>
<p>This will give any of your programs detailed, colored tracebacks with
automatic invocation of pdb.</p>
</div>
</div>
<div class="section" id="pasting-of-code-starting-with-python-or-ipython-prompts">
<span id="pasting-with-prompts"></span><h2>Pasting of code starting with Python or IPython prompts<a class="headerlink" href="#pasting-of-code-starting-with-python-or-ipython-prompts" title="Permalink to this headline">¶</a></h2>
<p>IPython is smart enough to filter out input prompts, be they plain Python ones
(<code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">...</span></code>) or IPython ones (<code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[N]:</span></code> and <code class="docutils literal notranslate"><span class="pre">...:</span></code>).  You can
therefore copy and paste from existing interactive sessions without worry.</p>
<p>The following is a ‘screenshot’ of how things work, copying an example from the
standard Python tutorial:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="o">&gt;&gt;&gt;</span> <span class="c1"># Fibonacci series:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="o">...</span> <span class="c1"># the sum of two elements defines the next</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="o">...</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="o">&gt;&gt;&gt;</span> <span class="k">while</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
   <span class="o">...</span><span class="p">:</span>     <span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
   <span class="o">...</span><span class="p">:</span>     <span class="o">...</span>     <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
   <span class="o">...</span><span class="p">:</span>
<span class="mi">1</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">5</span>
<span class="mi">8</span>
</pre></div>
</div>
<p>And pasting from IPython sessions works equally well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
   <span class="o">...</span><span class="p">:</span>        <span class="o">...</span><span class="p">:</span>     <span class="s2">&quot;A simple function&quot;</span>
   <span class="o">...</span><span class="p">:</span>        <span class="o">...</span><span class="p">:</span>     <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
   <span class="o">...</span><span class="p">:</span>    <span class="o">...</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="mi">9</span>
</pre></div>
</div>
</div>
<div class="section" id="gui-event-loop-support">
<span id="gui-support"></span><h2>GUI event loop support<a class="headerlink" href="#gui-event-loop-support" title="Permalink to this headline">¶</a></h2>
<p>IPython has excellent support for working interactively with Graphical User
Interface (GUI) toolkits, such as wxPython, PyQt4/PySide, PyGTK and Tk. This is
implemented by running the toolkit’s event loop while IPython is waiting for
input.</p>
<p>For users, enabling GUI event loop integration is simple.  You simple use the
<code class="xref std std-magic docutils literal notranslate"><span class="pre">%gui</span></code> magic as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">gui</span> <span class="p">[</span><span class="n">GUINAME</span><span class="p">]</span>
</pre></div>
</div>
<p>With no arguments, <code class="docutils literal notranslate"><span class="pre">%gui</span></code> removes all GUI support.  Valid <code class="docutils literal notranslate"><span class="pre">GUINAME</span></code>
arguments include <code class="docutils literal notranslate"><span class="pre">wx</span></code>, <code class="docutils literal notranslate"><span class="pre">qt</span></code>, <code class="docutils literal notranslate"><span class="pre">qt5</span></code>, <code class="docutils literal notranslate"><span class="pre">gtk</span></code>, <code class="docutils literal notranslate"><span class="pre">gtk3</span></code> and <code class="docutils literal notranslate"><span class="pre">tk</span></code>.</p>
<p>Thus, to use wxPython interactively and create a running <code class="xref py py-class docutils literal notranslate"><span class="pre">wx.App</span></code>
object, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">gui</span> <span class="n">wx</span>
</pre></div>
</div>
<p>You can also start IPython with an event loop set up using the <code class="docutils literal notranslate"><span class="pre">--gui</span></code>
flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipython --gui=qt
</pre></div>
</div>
<p>For information on IPython’s <a class="reference external" href="http://matplotlib.org">matplotlib</a> integration (and the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>
mode) see <a class="reference internal" href="#matplotlib-support"><span class="std std-ref">this section</span></a>.</p>
<p>For developers that want to integrate additional event loops with IPython, see
<a class="reference internal" href="../config/eventloops.html"><span class="doc">Integrating with GUI event loops</span></a>.</p>
<p>When running inside IPython with an integrated event loop, a GUI application
should <em>not</em> start its own event loop. This means that applications that are
meant to be used both
in IPython and as standalone apps need to have special code to detects how the
application is being run. We highly recommend using IPython’s support for this.
Since the details vary slightly between toolkits, we point you to the various
examples in our source directory <code class="file docutils literal notranslate"><span class="pre">examples/IPython</span> <span class="pre">Kernel/gui/</span></code> that
demonstrate these capabilities.</p>
<div class="section" id="pyqt-and-pyside">
<h3>PyQt and PySide<a class="headerlink" href="#pyqt-and-pyside" title="Permalink to this headline">¶</a></h3>
<p>When you use <code class="docutils literal notranslate"><span class="pre">--gui=qt</span></code> or <code class="docutils literal notranslate"><span class="pre">--matplotlib=qt</span></code>, IPython can work with either
PyQt4 or PySide.  There are three options for configuration here, because
PyQt4 has two APIs for QString and QVariant: v1, which is the default on
Python 2, and the more natural v2, which is the only API supported by PySide.
v2 is also the default for PyQt4 on Python 3.  IPython’s code for the QtConsole
uses v2, but you can still use any interface in your code, since the
Qt frontend is in a different process.</p>
<p>The default will be to import PyQt4 without configuration of the APIs, thus
matching what most applications would expect. It will fall back to PySide if
PyQt4 is unavailable.</p>
<p>If specified, IPython will respect the environment variable <code class="docutils literal notranslate"><span class="pre">QT_API</span></code> used
by ETS.  ETS 4.0 also works with both PyQt4 and PySide, but it requires
PyQt4 to use its v2 API.  So if <code class="docutils literal notranslate"><span class="pre">QT_API=pyside</span></code> PySide will be used,
and if <code class="docutils literal notranslate"><span class="pre">QT_API=pyqt</span></code> then PyQt4 will be used <em>with the v2 API</em> for
QString and QVariant, so ETS codes like MayaVi will also work with IPython.</p>
<p>If you launch IPython in matplotlib mode with <code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">--matplotlib=qt</span></code>,
then IPython will ask matplotlib which Qt library to use (only if QT_API is
<em>not set</em>), via the ‘backend.qt4’ rcParam.  If matplotlib is version 1.0.1 or
older, then IPython will always use PyQt4 without setting the v2 APIs, since
neither v2 PyQt nor PySide work.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that this means for ETS 4 to work with PyQt4, <code class="docutils literal notranslate"><span class="pre">QT_API</span></code> <em>must</em> be set
to work with IPython’s qt integration, because otherwise PyQt4 will be
loaded in an incompatible mode.</p>
<p>It also means that you must <em>not</em> have <code class="docutils literal notranslate"><span class="pre">QT_API</span></code> set if you want to
use <code class="docutils literal notranslate"><span class="pre">--gui=qt</span></code> with code that requires PyQt4 API v1.</p>
</div>
</div>
</div>
<div class="section" id="plotting-with-matplotlib">
<span id="matplotlib-support"></span><h2>Plotting with matplotlib<a class="headerlink" href="#plotting-with-matplotlib" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://matplotlib.org">matplotlib</a> provides high quality 2D and 3D plotting for Python. <a class="reference external" href="http://matplotlib.org">matplotlib</a>
can produce plots on screen using a variety of GUI toolkits, including Tk,
PyGTK, PyQt4 and wxPython. It also provides a number of commands useful for
scientific computing, all with a syntax compatible with that of the popular
Matlab program.</p>
<p>To start IPython with matplotlib support, use the <code class="docutils literal notranslate"><span class="pre">--matplotlib</span></code> switch. If
IPython is already running, you can run the <code class="xref std std-magic docutils literal notranslate"><span class="pre">%matplotlib</span></code> magic.  If no
arguments are given, IPython will automatically detect your choice of
matplotlib backend.  You can also request a specific backend with
<code class="docutils literal notranslate"><span class="pre">%matplotlib</span> <span class="pre">backend</span></code>, where <code class="docutils literal notranslate"><span class="pre">backend</span></code> must be one of: ‘tk’, ‘qt’, ‘wx’,
‘gtk’, ‘osx’.  In the web notebook and Qt console, ‘inline’ is also a valid
backend value, which produces static figures inlined inside the application
window instead of matplotlib’s interactive figures that live in separate
windows.</p>
</div>
<div class="section" id="interactive-demos-with-ipython">
<span id="interactive-demos"></span><h2>Interactive demos with IPython<a class="headerlink" href="#interactive-demos-with-ipython" title="Permalink to this headline">¶</a></h2>
<p>IPython ships with a basic system for running scripts interactively in
sections, useful when presenting code to audiences. A few tags embedded
in comments (so that the script remains valid Python code) divide a file
into separate blocks, and the demo can be run one block at a time, with
IPython printing (with syntax highlighting) the block before executing
it, and returning to the interactive prompt after each block. The
interactive namespace is updated after each block is run with the
contents of the demo’s namespace.</p>
<p>This allows you to show a piece of code, run it and then execute
interactively commands based on the variables just created. Once you
want to continue, you simply execute the next block of the demo. The
following listing shows the markup necessary for dividing a script into
sections for execution as a demo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;A simple interactive demo to illustrate the use of IPython&#39;s Demo class.</span>

<span class="sd">Any python script can be run as a demo, but that does little more than showing</span>
<span class="sd">it on-screen, syntax-highlighted in one shot.  If you add a little simple</span>
<span class="sd">markup, you can stop at specified intervals and return to the ipython prompt,</span>
<span class="sd">resuming execution later.</span>

<span class="sd">This is a unicode test, åäö</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Hello, welcome to an interactive IPython demo.&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Executing this block should require confirmation before proceeding,&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;unless auto_all has been set to true in the demo object&#39;</span><span class="p">)</span>

<span class="c1"># The mark below defines a block boundary, which is a point where IPython will</span>
<span class="c1"># stop execution and return to the interactive prompt.</span>
<span class="c1"># &lt;demo&gt; --- stop ---</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>

<span class="c1"># &lt;demo&gt; --- stop ---</span>

<span class="c1"># the mark below makes this block as silent</span>
<span class="c1"># &lt;demo&gt; silent</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;This is a silent block, which gets executed but not printed.&#39;</span><span class="p">)</span>

<span class="c1"># &lt;demo&gt; --- stop ---</span>
<span class="c1"># &lt;demo&gt; auto</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;This is an automatic block.&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;It is executed without asking for confirmation, but printed.&#39;</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;z=&#39;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># &lt;demo&gt; --- stop ---</span>
<span class="c1"># This is just another normal block.</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;z is now:&#39;</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;bye!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to run a file as a demo, you must first make a Demo object out
of it. If the file is named myscript.py, the following code will make a
demo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.lib.demo</span> <span class="k">import</span> <span class="n">Demo</span>

<span class="n">mydemo</span> <span class="o">=</span> <span class="n">Demo</span><span class="p">(</span><span class="s1">&#39;myscript.py&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This creates the mydemo object, whose blocks you run one at a time by
simply calling the object with no arguments. Then call it to run each step
of the demo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mydemo</span><span class="p">()</span>
</pre></div>
</div>
<p>Demo objects can be
restarted, you can move forward or back skipping blocks, re-execute the
last block, etc. See the <a class="reference internal" href="../api/generated/IPython.lib.demo.html#module-IPython.lib.demo" title="IPython.lib.demo"><code class="xref py py-mod docutils literal notranslate"><span class="pre">IPython.lib.demo</span></code></a> module and the
<a class="reference internal" href="../api/generated/IPython.lib.demo.html#IPython.lib.demo.Demo" title="IPython.lib.demo.Demo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Demo</span></code></a> class for details.</p>
<p>Limitations: These demos are limited to
fairly simple uses. In particular, you cannot break up sections within
indented code (loops, if statements, function definitions, etc.)
Supporting something like this would basically require tracking the
internal execution state of the Python interpreter, so only top-level
divisions are allowed. If you want to be able to open an IPython
instance at an arbitrary point in a program, you can use IPython’s
<a class="reference internal" href="#embedding"><span class="std std-ref">embedding facilities</span></a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="shell.html" class="btn btn-neutral float-right" title="IPython as a system shell" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="plotting.html" class="btn btn-neutral float-left" title="Rich Outputs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The IPython Development Team
      <span class="lastupdated">
        Last updated on Aug 30, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>